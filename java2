// âœ… This makes the file a module, required for "declare global"
export {};

// âœ… Add browser speech APIs to TypeScriptâ€™s global scope
declare global {
  interface Window {
    webkitSpeechRecognition: any;
    SpeechRecognition: any;
  }
  interface SpeechRecognitionEvent extends Event {
    results: SpeechRecognitionResultList;
  }
}

// ğŸ”¤ Phrase-to-GenZ replacements
const phraseMap: Record<string, string> = {
  "good morning": "rise n slay ğŸŒğŸ’…",
  "i don't know": "idk bro ğŸ¤·",
  "what are you doing": "wyd ğŸ‘€",
  "be right back": "brb ğŸƒğŸ’¨",
  "i'm tired": "iâ€™m literally done ğŸ˜®â€ğŸ’¨",
  "let's go": "we up ğŸ”¥ğŸ™Œ",
  "how are you": "u vibin'?",
  "i'm fine": "chillin ğŸ˜Œ",
  "nothing": "nahh just vibes ğŸŒŠ",
  "just kidding": "jk lol ğŸ˜¹",
  "no problem": "no cap ğŸ˜",
  "i am very busy": "iâ€™m booked n busy ğŸ’…ğŸ“…",
  "that's not fair": "thatâ€™s sus ğŸ˜¤",
  "i'm not interested": "miss me with that ğŸ™…",
  "i'm feeling sad": "i'm in my feels ğŸ˜¢",
  "i don't care": "meh ğŸ˜",
  "that's so funny": "i'm dead ğŸ’€ğŸ˜‚",
  "wait a second": "hold up â³",
  "i agree": "big facts ğŸ«¡",
  "you're right": "frfr ğŸ’¯",
  "i'm excited": "letâ€™s goo ğŸ”¥ğŸ”¥",
  "that's boring": "lowkey lame ğŸ˜’",
  "i'm bored": "need some drama fr ğŸ˜©",
  "talk to you later": "ttyl ğŸ«¡",
  "i'm hungry": "need a vibe snack ğŸ•",
"i don't understand": "bruh iâ€™m lost ğŸŒ€",
"i need help": "send backup ğŸš¨",
"i made a mistake": "my bad fr ğŸ˜¬",
"this is amazing": "this slaps ğŸ”¥",
"i'm confused": "whatâ€™s goin on rn ğŸ˜µâ€ğŸ’«",
"are you serious": "you deadass rn? ğŸ¤¨",
"i'm nervous": "got mad butterflies ğŸ˜°",
"i'm scared": "shooketh ğŸ˜±",
"that was unexpected": "plot twist fr ğŸ¬",
"i can't believe this": "no wayyy ğŸ˜®",
"i'm shocked": "iâ€™m shook ğŸ˜³",
"iâ€™m going to sleep": "i'm clockin out ğŸ˜´",
"i woke up late": "slept thru my whole life ğŸ˜µâ€ğŸ’¤",
"i feel lazy": "in max chill mode ğŸ˜ŒğŸ›‹ï¸",
"iâ€™m on my way": "pullin up rn ğŸš—ğŸ’¨",
"just arrived": "iâ€™m here bestie ğŸ›¬",
"thatâ€™s impressive": "you ate that ğŸ‘",
"letâ€™s hang out": "letâ€™s vibe irl ğŸ‰",
"iâ€™m so happy": "vibes on max ğŸ˜âœ¨",
"thatâ€™s not okay": "nah that ainâ€™t it chief ğŸš«",
"please wait": "hold up fr ğŸ•",
"iâ€™m listening": "spill the tea ğŸµğŸ‘‚",
"tell me everything": "drop the whole tea sis â˜•ï¸",
"iâ€™m trying my best": "lowkey putting in work ğŸ˜¤",
"you look great": "youâ€™re slayin fr ğŸ‘‘âœ¨",
"youâ€™re annoying": "you extra af ğŸ™„",
"youâ€™re funny": "lol you wildin ğŸ¤ª",
"donâ€™t worry": "no stress, just vibes ğŸŒˆ",
"this is bad": "this ainâ€™t it ğŸ˜¬",
"letâ€™s chill": "letâ€™s vibe ğŸ§Š",
"letâ€™s take a break": "break time, bestie âœ¨â˜•ï¸",
"i'm not okay": "mentally on airplane mode âœˆï¸ğŸ˜©",
"i feel sick": "not vibing physically ğŸ¤’",
"iâ€™m in a hurry": "zoomin rn ğŸš€",
"i like this": "this is a whole vibe ğŸ’¯",
"donâ€™t forget": "no cap, remember this ğŸ§ ",
"what happened": "wyd now?? ğŸ˜®",
"i miss you": "where you at bestie ğŸ¥º",
"call me": "hit my line ğŸ“",
"iâ€™m done": "thatâ€™s a wrap âœŒï¸",
"i need a break": "gotta log off fr ğŸ“´",
"thatâ€™s awesome": "mad respect ğŸ”¥",
"whatâ€™s going on": "wassup with that ğŸ‘€",
"everything is fine": "we chillin ğŸ˜",
"iâ€™m serious": "i ainâ€™t playin fr ğŸ§¢",
"letâ€™s do this": "itâ€™s go time ğŸ•¶ï¸",
"this is boring": "this dry af ğŸ’€"

};

// ğŸ”¤ Word-to-GenZ replacements
const wordMap: Record<string, string> = {
  "work": "the grind ğŸ˜©",
  "working": "grinding fr ğŸ˜¤",
  "tired": "dead inside ğŸ’€",
  "busy": "booked n busy ğŸ’…",
  "meeting": "linkup",
  "study": "brain gym ğŸ§ ",
  "problem": "it's giving drama ğŸ§ƒ",
  "amazing": "iconic ğŸ”¥",
  "congratulations": "slayyy ğŸ‘‘ğŸ”¥",
  "friend": "bestie ğŸ’…",
  "friends": "besties ğŸ’…",
  "sad": "in my feels ğŸ˜”",
  "happy": "vibin âœ¨",
  "angry": "pressed ğŸ’¢",
  "okay": "okok slay",
  "ok": "slay",
  "sorry": "my bad ğŸ˜­",
  "canâ€™t": "nah fam ğŸ™…",
  "cannot": "canâ€™t fr",
  "love": "mad respect â¤ï¸",
  "cool": "drippy ğŸ§Š",
  "funny": "i'm dead ğŸ’€",
  "late": "running on vibe time â°âœ¨",
  "good": "fire ğŸ”¥",
  "bad": "sus ğŸ˜¬",
  "yes": "yuhhh",
  "no": "nah",
  "really": "frfr",
  "understand": "gotchu fam âœ…",
  "hello": "yo",
  "hi": "heyoo",
  "thanks": "tysm ğŸ™",
  "homework": "academic pain ğŸ“šğŸ˜©",
  "teacher": "big boss ğŸ‘©â€ğŸ«",
  "parents": "the ops ğŸ•µï¸â€â™‚ï¸",
  "school": "stress camp ğŸ«",
  "bored": "lowkey dead ğŸ˜ª",
"money": "bag secured ğŸ’°",
"rich": "loaded af ğŸ’¸",
"poor": "broke vibes ğŸ˜­",
"hungry": "starvin fr ğŸ”",
"food": "grub ğŸ˜‹",
"sleep": "powering down ğŸ˜´",
"awesome": "straight vibes ğŸŒˆ",
"boring": "dry af ğŸ’¤",
"party": "banger ğŸ”¥ğŸ‰",
"smart": "big brain ğŸ§ ",
"dumb": "no thoughts ğŸ§â€â™‚ï¸",
"laugh": "LOL ğŸ˜‚",
"weird": "mad sus ğŸ˜µ",
"selfie": "front cam flex ğŸ“¸",
"money problem": "wallet crisis ğŸ˜¬",
"school exam": "pain unlocked ğŸ˜“",
"assignment": "deadline doom â³",
"vacation": "outta here âœˆï¸ğŸŒ´",
"break": "mental reset ğŸ”",
"hangout": "vibe sesh ğŸ«‚",
"wait": "hold up â³",
"look": "peep this ğŸ‘€",
"run": "skrrt ğŸƒğŸ’¨",
"fast": "zooming ğŸš€",
"slow": "snail mode ğŸŒ",
"fail": "flopped ğŸ’¥",
"win": "W secured ğŸ†",
"lose": "took an L ğŸ˜“",
"truth": "no cap ğŸ§¢",
"lie": "cappin hard ğŸ§¢",
"talk": "spill tea ğŸµ",
"gossip": "drama dropper ğŸ­",
"shopping": "retail therapy ğŸ›ï¸",
"angry face": "heated ğŸ”¥ğŸ˜¡",
"happy face": "smiling big ğŸ˜",
"confused": "lost in the sauce ğŸ˜µâ€ğŸ’«",
"best friend": "ride or die ğŸ‘¯",
"enemy": "the opps ğŸ˜¤",
"crush": "secret simp ğŸ’˜",
"beautiful": "slay queen ğŸ‘‘",
"handsome": "looking drippy ğŸ˜",
"photo": "pic for the gram ğŸ“·",
"video": "vlog vibes ğŸ¥",
"joke": "giggle fuel ğŸ¤£",
"meme": "vibe post ğŸ§ƒ",
"music": "beats on ğŸ”Š",
"song": "banger track ğŸ¶",
"instagram": "the gram ğŸ“¸",
"tiktok": "scroll trap ğŸµğŸŒ€",
"youtube": "vid rabbit hole ğŸ“º",
"internet": "the void ğŸŒ",
"phone": "lifeline ğŸ“±",
"chat": "texting grind ğŸ’¬",
"submit the assignment": "drop the heat ğŸ”¥ğŸ“„",
"final exam": "the boss level ğŸ’€ğŸ“š",
"study time": "brain grind ğŸ§ ğŸ’¥",
"i passed": "aced that fr ğŸ¯",
"i failed": "L taken ğŸ’€",
"can i go to the bathroom": "need a vibe break ğŸš½ğŸ’¨",
"back to class": "returning to the battlefield ğŸ˜¤",
"i need to study": "cramming zone activated ğŸ˜µâ€ğŸ’«",
"letâ€™s do group study": "study squad assemble ğŸ’ªğŸ“–",
"i forgot my homework": "left the pain at home ğŸ§ â¡ï¸ğŸ ",
"library": "quiet grind zone ğŸ§˜ğŸ“š",
"i like you": "lowkey got a crush on u ğŸ˜³â¤ï¸",
"i love you": "mad respect + vibes 4 u â¤ï¸âœ¨",
"will you be mine": "u tryna vibe long term? ğŸ’ğŸ‘€",
"you're cute": "ur a whole snack ğŸ˜‹",
"youâ€™re hot": "you got main character energy ğŸ”¥",
"wanna hang out": "tryna link up n vibe? ğŸ‘€",
"let's go on a date": "vibe check over dinner? ğŸ•¯ï¸ğŸ",
"you're mine": "locked u down ğŸ”ğŸ’˜",
"i miss you": "feelin the void rn ğŸ¥º",
"letâ€™s be more than friends": "letâ€™s upgrade the vibes ğŸ’",
"it is what it is": "vibes be vibin ğŸ’«",
"life is hard": "the grind never ends ğŸ’€",
"i'm tired of everything": "log me out of this sim pls ğŸ˜©",
"thatâ€™s just life": "main character arc unlocked ğŸ­",
"everything is fine": "this is fine meme energy ğŸ”¥ğŸ¶",
"donâ€™t take it seriously": "lowkey, chill ğŸ˜",
"i need peace": "vibe mode: do not disturb ğŸ§˜â€â™‚ï¸",
"no one understands me": "speaking alien out here ğŸ›¸ğŸ‘½",
"trying my best": "hustling in hard mode ğŸ› ï¸",
"whatâ€™s up?": "wyd bestie ğŸ‘€",
"nothing much": "just vibin ğŸ’†â€â™‚ï¸",
"got it": "say less ğŸ”¥",
"are you serious?": "you deadass rn? ğŸ¤¨",
"i donâ€™t know": "idk lol ğŸ¤·",
"iâ€™ll check": "lemme peep real quick ğŸ‘ï¸",
"thank you": "tysm ğŸ™ğŸ’•",
"see you later": "ttyl bestie ğŸ«¡",
"good night": "sleep tight, slay dreams ğŸŒ™âœ¨"
};

// ğŸ” Main Gen Z translator
function translateToGenZ(): void {
  const inputElement = document.getElementById("inputText") as HTMLTextAreaElement | null;
  const outputElement = document.getElementById("outputText") as HTMLElement | null;

  if (!inputElement || !outputElement) return;

  let input = inputElement.value.toLowerCase();

  // 1ï¸âƒ£ Replace full phrases
  for (const phrase in phraseMap) {
    const regex = new RegExp(`\\b${phrase}\\b`, 'gi');
    input = input.replace(regex, phraseMap[phrase]);
  }

  // 2ï¸âƒ£ Replace individual words
  const words = input.split(/\s+/);
  const translatedWords = words.map(word => {
    const punctuation = word.match(/[.,!?]$/);
    const cleanWord = word.replace(/[.,!?]/g, "");

    let translated = cleanWord;

    if (wordMap[cleanWord]) {
      translated = wordMap[cleanWord];
    }

    if (punctuation) {
      translated += punctuation[0];
    }

    return translated;
  });

  outputElement.innerText = translatedWords.join(" ");
}

// ğŸ¤ Voice input
function startListening(): void {
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

  if (!SpeechRecognition) {
    alert("Voice recognition not supported in this browser.");
    return;
  }

  const recognition = new SpeechRecognition();
  recognition.lang = 'en-US';
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;

  recognition.onresult = (event: SpeechRecognitionEvent) => {
    const transcript = event.results[0][0].transcript;
    const inputBox = document.getElementById("inputText") as HTMLTextAreaElement | null;
    if (inputBox) {
      inputBox.value = transcript;
      translateToGenZ();
    }
  };

  recognition.onerror = (event: any) => {
    alert("Voice input error: " + event.error);
  };

  recognition.start();
}

// ğŸ”Š Voice output
function speakOutput(): void {
  const outputElement = document.getElementById("outputText") as HTMLElement | null;
  if (!outputElement || !outputElement.innerText) return;

  const utterance = new SpeechSynthesisUtterance(outputElement.innerText);
  utterance.lang = 'en-US';
  utterance.rate = 1;
  speechSynthesis.speak(utterance);
}

// Make functions available globally if needed in HTML onclick
(window as any).translateToGenZ = translateToGenZ;
(window as any).startListening = startListening;
(window as any).speakOutput = speakOutput;
